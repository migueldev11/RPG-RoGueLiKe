<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RPGLiKe â€” Rogue-style ASCII</title>
<style>
Â  body{margin:0;font-family:monospace;background:#060606;color:#eaeaea;display:flex;flex-direction:column;align-items:center;padding:8px}
Â  h1{margin:6px 0 10px 0;font-size:18px}
Â  #game-container{white-space:pre;font-size:13px;line-height:13px;background:#111;padding:8px;border:3px solid #333;max-width:calc(100vw - 20px);overflow:auto;height:420px}
Â  #hotbar{display:flex;gap:12px;margin-top:8px;background:#0b0b0b;padding:8px;border:2px solid #222;width:640px;justify-content:space-between}
Â  #msg{width:640px;background:#070707;border:2px solid #222;padding:8px;margin-top:8px;min-height:48px}
Â  .player{color:#6f6}
Â  .enemy{color:#f66}
Â  .item{color:#ffb}
Â  .stairs{color:#6cf}
Â  .shop{color:#ffdb70}
Â  #controls{display:flex;gap:6px;margin-top:8px}
Â  .ctl{width:56px;height:44px;background:#222;border:none;color:#fff;font-size:18px;border-radius:6px}
Â  @media(max-width:720px){
Â  Â  #hotbar,#msg{width:calc(100vw - 20px)}
Â  Â  .ctl{width:48px;height:44px}
Â  }
</style>
</head>
<body>

<h1>RPGLiKe â€” Rogue-style map (+ - | /)</h1>

<div id="game-container" tabindex="0"></div>

<div id="hotbar">
Â  <div>HP: <span id="hp">100</span></div>
Â  <div>Andar: <span id="floor">1</span></div>
Â  <div>Gold: <span id="gold">0</span></div>
Â  <div>Dano: <span id="damage">10</span></div>
</div>

<div id="msg">Pressione setas ou use botÃµes. O mapa usa + - | para bordas, . chÃ£o, # parede, &lt; escada, T loja.</div>

<div id="controls">
Â  <button class="ctl" id="up">â–²</button>
Â  <button class="ctl" id="left">â—„</button>
Â  <button class="ctl" id="down">â–¼</button>
Â  <button class="ctl" id="right">â–º</button>
Â  <button class="ctl" id="attack">âš”</button>
Â  <button class="ctl" id="save">ðŸ’¾</button>
Â  <button class="ctl" id="load">ðŸ“‚</button>
</div>

<script>
(() => {
Â  const container = document.getElementById('game-container');
Â  const hpEl = document.getElementById('hp');
Â  const floorEl = document.getElementById('floor');
Â  const goldEl = document.getElementById('gold');
Â  const dmgEl = document.getElementById('damage');
Â  const msgEl = document.getElementById('msg');

Â  const MAP_W = 60;
Â  const MAP_H = 22;
Â  const TOTAL_FLOORS = 5;

Â  let map = [];
Â  let rooms = [];
Â  let enemies = [];
Â  let items = [];
Â  let player = { x:0, y:0, hp:100, maxHp:100, baseDamage:10, floor:0, gold:0, level:1 };
Â  let isGameOver = false;

Â  function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

Â  function initMapFill(ch='#'){
Â  Â  map = Array.from({length:MAP_H}, ()=> Array.from({length:MAP_W}, ()=> ch));
Â  }

Â  function generateCity(){
Â  Â  initMapFill('.');
Â  Â  for(let y=1; y<MAP_H-1; y++){
Â  Â  Â  for(let x=1; x<MAP_W-1; x++){
Â  Â  Â  Â  map[y][x] = '.';
Â  Â  Â  }
Â  Â  }
Â  Â  rooms = [];
Â  Â  enemies = [];
Â  Â  items = [];
Â  Â  
Â  Â  player.x = Math.floor(MAP_W/2);
Â  Â  player.y = Math.floor(MAP_H/2);

Â  Â  map[player.y-2][player.x] = 'T';
Â  Â  map[player.y+2][player.x] = '<';

Â  Â  addMsg('Bem-vindo Ã  cidade. Use as setas para se mover. Suba a escada para a masmorra ou visite a loja "T".');
Â  }

Â  function generateDungeon(){
Â  Â  initMapFill('#');
Â  Â  rooms = [];
Â  Â  enemies = [];
Â  Â  items = [];

Â  Â  const roomCount = 4 + rand(0,3);
Â  Â  for(let i=0;i<roomCount;i++){
Â  Â  Â  const w = rand(6,12);
Â  Â  Â  const h = rand(4,8);
Â  Â  Â  const x = rand(1, MAP_W - w - 2);
Â  Â  Â  const y = rand(1, MAP_H - h - 2);
Â  Â  Â  for(let yy=y; yy<y+h; yy++){
Â  Â  Â  Â  for(let xx=x; xx<x+w; xx++){
Â  Â  Â  Â  Â  if(yy===y && xx===x) map[yy][xx] = '+';
Â  Â  Â  Â  Â  else if(yy===y && xx===x+w-1) map[yy][xx] = '+';
Â  Â  Â  Â  Â  else if(yy===y+h-1 && xx===x) map[yy][xx] = '+';
Â  Â  Â  Â  Â  else if(yy===y+h-1 && xx===x+w-1) map[yy][xx] = '+';
Â  Â  Â  Â  Â  else if(yy===y || yy===y+h-1) map[yy][xx] = '-';
Â  Â  Â  Â  Â  else if(xx===x || xx===x+w-1) map[yy][xx] = '|';
Â  Â  Â  Â  Â  else map[yy][xx] = '.';
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  rooms.push({x,y,w,h, cx: Math.floor(x + w/2), cy: Math.floor(y + h/2)});
Â  Â  }

Â  Â  for(let i=1;i<rooms.length;i++){
Â  Â  Â  const a = rooms[i-1], b = rooms[i];
Â  Â  Â  const ax=a.cx, ay=a.cy, bx=b.cx, by=b.cy;
Â  Â  Â  if(Math.random()<0.5){
Â  Â  Â  Â  carveH(ax,bx,ay);
Â  Â  Â  Â  carveV(ay,by,bx);
Â  Â  Â  } else {
Â  Â  Â  Â  carveV(ay,by,ax);
Â  Â  Â  Â  carveH(ax,bx,by);
Â  Â  Â  }
Â  Â  }

Â  Â  const start = rooms[0];
Â  Â  player.x = start.cx; player.y = start.cy;

Â  Â  let placedUpStairs = false;
Â  Â  while(!placedUpStairs){
Â  Â  Â  const r = rooms[rand(0,rooms.length-1)];
Â  Â  Â  const rx = rand(r.x+1, r.x+r.w-2);
Â  Â  Â  const ry = rand(r.y+1, r.y+r.h-2);
Â  Â  Â  if(map[ry][rx]==='.' && !(rx===player.x && ry===player.y)){
Â  Â  Â  Â  map[ry][rx] = '>';
Â  Â  Â  Â  placedUpStairs = true;
Â  Â  Â  }
Â  Â  }

Â  Â  if(player.floor === TOTAL_FLOORS){
Â  Â  Â  let placedBoss=false;
Â  Â  Â  while(!placedBoss){
Â  Â  Â  Â  const r = rooms[rand(0,rooms.length-1)];
Â  Â  Â  Â  const rx = rand(r.x+1, r.x+r.w-2);
Â  Â  Â  Â  const ry = rand(r.y+1, r.y+r.h-2);
Â  Â  Â  Â  if(map[ry][rx]==='.' && !(rx===player.x && ry===player.y)){
Â  Â  Â  Â  Â  const bossDmg = 15 + player.floor * 2;
Â  Â  Â  Â  Â  const bossHp = 100 + player.floor * 30;
Â  Â  Â  Â  Â  enemies.push({x:rx,y:ry,hp:bossHp,damage:bossDmg,symbol:'B',xp:150});
Â  Â  Â  Â  Â  placedBoss=true;
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  addMsg('Ãšltimo andar: chefe Ã  espreita!');
Â  Â  } else {
Â  Â  Â  let placedDownStairs=false;
Â  Â  Â  while(!placedDownStairs){
Â  Â  Â  Â  const r = rooms[rand(0,rooms.length-1)];
Â  Â  Â  Â  const rx = rand(r.x+1, r.x+r.w-2);
Â  Â  Â  Â  const ry = rand(r.y+1, r.y+r.h-2);
Â  Â  Â  Â  if(map[ry][rx]==='.' && !(rx===player.x && ry===player.y)){
Â  Â  Â  Â  Â  map[ry][rx] = '<';
Â  Â  Â  Â  Â  placedDownStairs=true;
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  if(Math.random()<0.6){
Â  Â  Â  Â  let placedT=false;
Â  Â  Â  Â  while(!placedT){
Â  Â  Â  Â  Â  const r = rooms[rand(0,rooms.length-1)];
Â  Â  Â  Â  Â  const rx = rand(r.x+1, r.x+r.w-2);
Â  Â  Â  Â  Â  const ry = rand(r.y+1, r.y+r.h-2);
Â  Â  Â  Â  Â  if(map[ry][rx]==='.' && !(rx===player.x && ry===player.y)){
Â  Â  Â  Â  Â  Â  map[ry][rx] = 'T';
Â  Â  Â  Â  Â  Â  placedT=true;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }

Â  Â  const cnt = 4 + player.floor + rand(0,4);
Â  Â  for(let i=0;i<cnt;i++){
Â  Â  Â  let tries=0;
Â  Â  Â  while(tries < 400){
Â  Â  Â  Â  const rx = rand(1, MAP_W-2), ry = rand(1, MAP_H-2);
Â  Â  Â  Â  if(map[ry][rx]==='.' && !(rx===player.x && ry===player.y) && !enemies.find(e=>e.x===rx&&e.y===ry)){
Â  Â  Â  Â  Â  const r = Math.random();
Â  Â  Â  Â  Â  if(r < 0.6) enemies.push({x:rx,y:ry,hp:20 + 6*player.floor,damage:5 + 1*player.floor,symbol:'Z',xp:12});
Â  Â  Â  Â  Â  else if(r < 0.85) enemies.push({x:rx,y:ry,hp:30 + 8*player.floor,damage:8 + 2*player.floor,symbol:'S',xp:18});
Â  Â  Â  Â  Â  else {
Â  Â  Â  Â  Â  Â  const it = Math.random();
Â  Â  Â  Â  Â  Â  if(it < 0.5) items.push({x:rx,y:ry,type:'P'});
Â  Â  Â  Â  Â  Â  else if(it < 0.8) items.push({x:rx,y:ry,type:'A'});
Â  Â  Â  Â  Â  Â  else items.push({x:rx,y:ry,type:'W'});
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  }
Â  Â  Â  Â  tries++;
Â  Â  Â  }
Â  Â  }
Â  }

Â  function carveH(x1,x2,y){
Â  Â  for(let x=Math.min(x1,x2); x<=Math.max(x1,x2); x++){
Â  Â  Â  if(map[y][x] === '#') map[y][x] = '.';
Â  Â  Â  else if(map[y][x] === '-' || map[y][x] === '|' || map[y][x] === '+') map[y][x] = '.';
Â  Â  }
Â  }
Â  function carveV(y1,y2,x){
Â  Â  for(let y=Math.min(y1,y2); y<=Math.max(y1,y2); y++){
Â  Â  Â  if(map[y][x] === '#') map[y][x] = '.';
Â  Â  Â  else if(map[y][x] === '-' || map[y][x] === '|' || map[y][x] === '+') map[y][x] = '.';
Â  Â  }
Â  }

Â  function draw(){
Â  Â  let out = '';
Â  Â  for(let y=0;y<MAP_H;y++){
Â  Â  Â  for(let x=0;x<MAP_W;x++){
Â  Â  Â  Â  const en = enemies.find(e=>e.x===x && e.y===y);
Â  Â  Â  Â  const it = items.find(i=>i.x===x && i.y===y);
Â  Â  Â  Â  if(player.x===x && player.y===y){
Â  Â  Â  Â  Â  out += `<span class="player">@</span>`;
Â  Â  Â  Â  } else if(en){
Â  Â  Â  Â  Â  out += `<span class="enemy">${en.symbol}</span>`;
Â  Â  Â  Â  } else if(it){
Â  Â  Â  Â  Â  out += `<span class="item">${it.type}</span>`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  const ch = map[y][x];
Â  Â  Â  Â  Â  if(ch === '.') out += '.';
Â  Â  Â  Â  Â  else if(ch === '<') out += `<span class="stairs"><</span>`;
Â  Â  Â  Â  Â  else if(ch === '>') out += `<span class="stairs">></span>`;
Â  Â  Â  Â  Â  else if(ch === 'T') out += `<span class="shop">T</span>`;
Â  Â  Â  Â  Â  else if(ch === '+' || ch === '-' || ch === '|') out += ch;
Â  Â  Â  Â  Â  else out += '#';
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  out += '\n';
Â  Â  }
Â  Â  container.innerHTML = out;
Â  }

Â  function addMsg(txt){ msgEl.textContent = txt; }

Â  function updateHotbar(){
Â  Â  hpEl.textContent = player.hp + ' / ' + player.maxHp;
Â  Â  floorEl.textContent = player.floor === 0 ? 'Cidade' : player.floor;
Â  Â  goldEl.textContent = player.gold;
Â  Â  dmgEl.textContent = player.baseDamage;
Â  }

Â  function saveGame(){
Â  Â  const gameState = {
Â  Â  Â  player: player,
Â  Â  Â  map: map,
Â  Â  Â  enemies: enemies,
Â  Â  Â  items: items,
Â  Â  };
Â  Â  localStorage.setItem('rpglike_save', JSON.stringify(gameState));
Â  Â  addMsg('Jogo salvo!');
Â  }

Â  function loadGame(){
Â  Â  const savedState = localStorage.getItem('rpglike_save');
Â  Â  if(savedState){
Â  Â  Â  const gameState = JSON.parse(savedState);
Â  Â  Â  player = gameState.player;
Â  Â  Â  map = gameState.map;
Â  Â  Â  enemies = gameState.enemies;
Â  Â  Â  items = gameState.items;
Â  Â  Â  addMsg('Jogo carregado!');
Â  Â  Â  return true;
Â  Â  }
Â  Â  return false;
Â  }

Â  function enemyAt(x,y){ return enemies.find(e=>e.x===x && e.y===y); }
Â  function itemAt(x,y){ return items.find(i=>i.x===x && i.y===y); }

Â  function canWalk(x,y){
Â  Â  if(x<0||y<0||x>=MAP_W||y>=MAP_H) return false;
Â  Â  const ch = map[y][x];
Â  Â  return (ch === '.' || ch === '<' || ch === '>' || ch === 'T');
Â  }

Â  function movePlayer(dx,dy){
Â  Â  if(isGameOver) return;
Â  Â  const nx = player.x + dx, ny = player.y + dy;
Â  Â  const en = enemyAt(nx,ny);
Â  Â  if(en){
Â  Â  Â  const dmg = player.baseDamage + rand(0,4);
Â  Â  Â  en.hp -= dmg;
Â  Â  Â  addMsg(`VocÃª atacou ${en.symbol} por ${dmg} de dano.`);
Â  Â  Â  if(en.hp <= 0){
Â  Â  Â  Â  killEnemy(en);
Â  Â  Â  } else {
Â  Â  Â  Â  player.hp -= en.damage;
Â  Â  Â  Â  addMsg(`${en.symbol} atacou de volta por ${en.damage}.`);
Â  Â  Â  Â  if(player.hp <= 0) gameOver();
Â  Â  Â  }
Â  Â  Â  updateHotbar();
Â  Â  Â  draw();
Â  Â  Â  return;
Â  Â  }
Â  Â  if(canWalk(nx,ny)){
Â  Â  Â  player.x = nx; player.y = ny;
Â  Â  Â  const tile = map[ny][nx];
Â  Â  Â  if(tile === '<'){
Â  Â  Â  Â  player.floor++;
Â  Â  Â  Â  if (player.floor === 1) addMsg('VocÃª desceu para a masmorra!');
Â  Â  Â  Â  else addMsg('VocÃª desceu para o andar ' + player.floor);
Â  Â  Â  Â  generateDungeon();
Â  Â  Â  } else if (tile === '>'){
Â  Â  Â  Â  addMsg('VocÃª subiu de volta para a cidade.');
Â  Â  Â  Â  player.floor = 0;
Â  Â  Â  Â  generateCity();
Â  Â  Â  } else if(tile === 'T'){
Â  Â  Â  Â  openShop();
Â  Â  Â  } else {
Â  Â  Â  Â  const itIdx = items.findIndex(i=>i.x===nx && i.y===ny);
Â  Â  Â  Â  if(itIdx !== -1){
Â  Â  Â  Â  Â  const it = items[itIdx];
Â  Â  Â  Â  Â  if(it.type === 'P'){ player.hp = Math.min(player.maxHp, player.hp + 30); addMsg('Usou poÃ§Ã£o: +30 HP'); }
Â  Â  Â  Â  Â  if(it.type === 'A'){ player.gold += rand(1,3); addMsg('Pegou flechas. Recebeu ouro.'); }
Â  Â  Â  Â  Â  if(it.type === 'W'){ player.baseDamage += 3; addMsg('Pegou arma: +3 dano'); }
Â  Â  Â  Â  Â  items.splice(itIdx,1);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  addMsg(`Andou para (${nx},${ny})`);
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  draw(); updateHotbar(); saveGame();
Â  Â  } else {
Â  Â  Â  addMsg('NÃ£o pode andar aÃ­!');
Â  Â  }
Â  }

Â  function killEnemy(en){
Â  Â  addMsg(`VocÃª derrotou ${en.symbol}!`);
Â  Â  player.gold += rand(3,8) + Math.floor(player.floor / 2);
Â  Â  enemies = enemies.filter(e=>e!==en);
Â  Â  updateHotbar();
Â  Â  if(en.symbol === 'B'){
Â  Â  Â  addMsg('VocÃª derrotou o chefe! Escadas de subida e descida apareceram.');
Â  Â  Â  let placedUp=false, placedDown=false;
Â  Â  Â  while(!placedUp || !placedDown){
Â  Â  Â  Â  const r = rooms[rand(0,rooms.length-1)];
Â  Â  Â  Â  const rx = rand(r.x+1, r.x+r.w-2);
Â  Â  Â  Â  const ry = rand(r.y+1, r.y+r.h-2);
Â  Â  Â  Â  if(map[ry][rx]==='.' && !(rx===player.x && ry===player.y)){
Â  Â  Â  Â  Â  if(!placedUp){
Â  Â  Â  Â  Â  Â  map[ry][rx] = '>';
Â  Â  Â  Â  Â  Â  placedUp=true;
Â  Â  Â  Â  Â  } else if (!placedDown){
Â  Â  Â  Â  Â  Â  map[ry][rx] = '<';
Â  Â  Â  Â  Â  Â  placedDown=true;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }
Â  }

Â  function openShop(){
Â  Â  const choice = prompt("Loja: 1) PoÃ§Ã£o +30HP (10g)\n2) Melhoria de Dano +3 (20g)\n3) PoÃ§Ã£o de HP MÃ¡ximo +10 (30g)\n4) Melhoria de Dano +5 (40g)\n\nDigite o nÃºmero, ou Cancel para sair.");
Â  Â  if(choice === null) { addMsg('Saiu da loja.'); return; }
Â  Â  if(choice === '1'){
Â  Â  Â  if(player.gold >= 10){ player.gold -= 10; player.hp = Math.min(player.maxHp, player.hp + 30); addMsg('Comprou poÃ§Ã£o +30HP'); }
Â  Â  Â  else addMsg('Ouro insuficiente.');
Â  Â  } else if(choice === '2'){
Â  Â  Â  if(player.gold >= 20){ player.gold -= 20; player.baseDamage += 3; addMsg('Comprou melhoria +3 dano'); }
Â  Â  Â  else addMsg('Ouro insuficiente.');
Â  Â  } else if(choice === '3'){
Â  Â  Â  if(player.gold >= 30){ player.gold -= 30; player.maxHp += 10; player.hp = Math.min(player.maxHp, player.hp + 10); addMsg('Comprou PoÃ§Ã£o de HP MÃ¡ximo (+10)'); }
Â  Â  Â  else addMsg('Ouro insuficiente.');
Â  Â  } else if(choice === '4'){
Â  Â  Â  if(player.gold >= 40){ player.gold -= 40; player.baseDamage += 5; addMsg('Comprou melhoria +5 dano'); }
Â  Â  Â  else addMsg('Ouro insuficiente.');
Â  Â  } else addMsg('OpÃ§Ã£o invÃ¡lida.');
Â  Â  updateHotbar();
Â  Â  saveGame();
Â  }

Â  function attackAction(){
Â  Â  let attacked = false;
Â  Â  const dirs = [[0,-1],[1,0],[0,1],[-1,0]];
Â  Â  for(const d of dirs){
Â  Â  Â  const en = enemyAt(player.x + d[0], player.y + d[1]);
Â  Â  Â  if(en){
Â  Â  Â  Â  const dmg = player.baseDamage + rand(0,4);
Â  Â  Â  Â  en.hp -= dmg;
Â  Â  Â  Â  addMsg(`VocÃª atacou ${en.symbol} por ${dmg}.`);
Â  Â  Â  Â  attacked = true;
Â  Â  Â  Â  if(en.hp <= 0) killEnemy(en);
Â  Â  Â  Â  else { player.hp -= en.damage; addMsg(`${en.symbol} revidou por ${en.damage}.`); if(player.hp<=0) gameOver(); }
Â  Â  Â  Â  break;
Â  Â  Â  }
Â  Â  }
Â  Â  if(!attacked) addMsg('Nenhum inimigo adjacente para atacar.');
Â  Â  updateHotbar(); draw();
Â  }

Â  function moveEnemies(){
Â  Â  for(const en of enemies){
Â  Â  Â  if(Math.random() < 0.4) continue;
Â  Â  Â  const dirs = [[0,-1],[1,0],[0,1],[-1,0]];
Â  Â  Â  const d = dirs[rand(0,3)];
Â  Â  Â  const nx = en.x + d[0], ny = en.y + d[1];
Â  Â  Â  if(nx === player.x && ny === player.y){
Â  Â  Â  Â  player.hp -= en.damage;
Â  Â  Â  Â  addMsg(`${en.symbol} atacou vocÃª por ${en.damage}!`);
Â  Â  Â  Â  if(player.hp <= 0) gameOver();
Â  Â  Â  } else if(map[ny] && map[ny][nx] && map[ny][nx] === '.' && !enemyAt(nx,ny)){
Â  Â  Â  Â  en.x = nx; en.y = ny;
Â  Â  Â  }
Â  Â  }
Â  }

Â  function gameOver(){
Â  Â  addMsg('VocÃª morreu... recarregue para tentar novamente.');
Â  Â  isGameOver = true;
Â  Â  localStorage.removeItem('rpglike_save');
Â  }

Â  document.getElementById('up').onclick = ()=> movePlayer(0,-1);
Â  document.getElementById('down').onclick = ()=> movePlayer(0,1);
Â  document.getElementById('left').onclick = ()=> movePlayer(-1,0);
Â  document.getElementById('right').onclick = ()=> movePlayer(1,0);
Â  document.getElementById('attack').onclick = ()=> attackAction();
Â  document.getElementById('save').onclick = ()=> saveGame();
Â  document.getElementById('load').onclick = ()=> {
Â  Â  if(loadGame()){
Â  Â  Â  draw();
Â  Â  Â  updateHotbar();
Â  Â  Â  addMsg('Jogo carregado com sucesso!');
Â  Â  } else {
Â  Â  Â  addMsg('Nenhum jogo salvo encontrado.');
Â  Â  }
Â  };

Â  window.addEventListener('keydown', e=>{
Â  Â  if(isGameOver) return;
Â  Â  switch(e.key){
Â  Â  Â  case 'ArrowUp': movePlayer(0,-1); break;
Â  Â  Â  case 'ArrowDown': movePlayer(0,1); break;
Â  Â  Â  case 'ArrowLeft': movePlayer(-1,0); break;
Â  Â  Â  case 'ArrowRight': movePlayer(1,0); break;
Â  Â  Â  case ' ': attackAction(); break;
Â  Â  Â  case 's':
Â  Â  Â  case 'S':
Â  Â  Â  Â  if(map[player.y][player.x] === 'T') openShop();
Â  Â  Â  Â  else addMsg('Nenhuma loja aqui.');
Â  Â  Â  Â  break;
Â  Â  Â  case 'l':
Â  Â  Â  case 'L': saveGame(); break;
Â  Â  Â  case 'p':
Â  Â  Â  case 'P':
Â  Â  Â  Â  if(loadGame()){
Â  Â  Â  Â  Â  draw();
Â  Â  Â  Â  Â  updateHotbar();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  addMsg('Nenhum jogo salvo encontrado.');
Â  Â  Â  Â  }
Â  Â  Â  Â  break;
Â  Â  }
Â  });

Â  function loop(){
Â  Â  if(isGameOver) return;
Â  Â  moveEnemies();
Â  Â  draw();
Â  Â  updateHotbar();
Â  Â  setTimeout(loop, 900);
Â  }

Â  if(!loadGame()){
Â  Â  generateCity();
Â  }
Â  draw();
Â  updateHotbar();
Â  loop();

})();
</script>

</body>
</html>
